<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="utf-8" />
<title>請假申請</title>
</head>
<body>

<h2>請假申請</h2>

姓名：
<input id="name" value="廖志豪"><br><br>

日期：
<input id="date" type="date"><br><br>

類型：
<select id="type">
  <option>全天</option>
  <option>半天</option>
</select><br><br>

原因：
<input id="reason"><br><br>

<button onclick="send()">送出</button>

<hr>
<h3>DEBUG</h3>
<pre id="debug"></pre>

<script>
const API = "https://punch-api.jackey1688.workers.dev";

async function send() {
  debug.textContent = "STEP 1: 送出請假";

  const body = {
    name: name.value,
    date: date.value,
    type: type.value,
    reason: reason.value
  };

  debug.textContent += "\nSTEP 2:\n" + JSON.stringify(body, null, 2);

  try {
    const res = await fetch(API + "/api/leave", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(body)
    });

    const json = await res.json();
    debug.textContent += "\nSTEP 3:\n" + JSON.stringify(json, null, 2);
  } catch (e) {
    debug.textContent += "\nERROR: " + e.message;
  }
}
</script>

</body>
</html>
