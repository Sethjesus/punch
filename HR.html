<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <title>HR 打卡紀錄</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: system-ui; background:#f2f4f7; padding:30px }
    h1 { text-align:center }
    table {
      width:100%; max-width:900px; margin:auto;
      border-collapse:collapse; background:#fff;
      box-shadow:0 8px 20px rgba(0,0,0,.08)
    }
    th,td { padding:12px; border-bottom:1px solid #eee; text-align:center }
    th { background:#3b82f6; color:#fff }
    .err { color:#c00; padding:20px }
  </style>
</head>
<body>

<h1>HR 打卡紀錄</h1>

<table>
  <thead>
    <tr>
      <th>姓名</th>
      <th>動作</th>
      <th>時間</th>
      <th>距離（公尺）</th>
    </tr>
  </thead>
  <tbody id="rows">
    <tr><td colspan="4">讀取中…</td></tr>
  </tbody>
</table>

<script>
const HR_API = "https://punch-api.jackey1688.workers.dev/api/hr";

async function loadHR() {
  const tbody = document.getElementById("rows");
  try {
    const res = await fetch(HR_API, { method: "POST" });
    const data = await res.json();

    if (!data.length) {
      tbody.innerHTML = `<tr><td colspan="4">尚無資料</td></tr>`;
      return;
    }

    tbody.innerHTML = data.map(r => `
      <tr>
        <td>${r.name}</td>
        <td>${r.action}</td>
        <td>${new Date(r.time).toLocaleString()}</td>
        <td>${r.distance ?? "N/A"}</td>
      </tr>
    `).join("");
  } catch {
    tbody.innerHTML =
      `<tr><td colspan="4" class="err">❌ 讀取失敗（HR API 尚未開放）</td></tr>`;
  }
}

loadHR();
</script>

</body>
</html>
