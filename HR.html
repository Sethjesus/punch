<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="utf-8" />
<title>HR 打卡紀錄</title>
</head>
<body>

<h2>HR 打卡紀錄</h2>

<table border="1">
<thead>
<tr>
  <th>姓名</th>
  <th>動作</th>
  <th>時間</th>
  <th>距離(m)</th>
  <th>合格</th>
  <th>出差地點</th>
</tr>
</thead>
<tbody id="rows"></tbody>
</table>

<hr>
<h3>DEBUG</h3>
<pre id="debug"></pre>

<script>
const API = "https://punch-api.jackey1688.workers.dev";

async function load() {
  debug.textContent = "STEP 1: 讀取紀錄";

  try {
    const res = await fetch(API + "/api/records");
    const data = await res.json();

    debug.textContent += "\nSTEP 2: 筆數 = " + data.length;

    data.forEach(r => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${r.name}</td>
        <td>${r.action}</td>
        <td>${r.time}</td>
        <td>${r.distance}</td>
        <td>${r.pass ? "✔" : "❌"}</td>
        <td>${r.place || ""}</td>
      `;
      rows.appendChild(tr);
    });

  } catch (e) {
    debug.textContent += "\nERROR: " + e.message;
  }
}

load();
</script>

</body>
</html>
